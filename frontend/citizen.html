<!DOCTYPE html>
<html>

<head>
    <title>Citizen Dashboard - SCSMS</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="css/citizen.css">

    <!-- FAVICON -->
    <link rel="icon" href="logo 2.png" type="image/x-icon">
    <link rel="icon" href="logo 2.png" type="image/png" sizes="32x32">

    <!-- APPLE / MOBILE -->
    <link rel="apple-touch-icon" href="logo 2.png">

    <!-- ANDROID / PWA -->
    <link rel="icon" sizes="192x192" href="logo 2.png">
    <link rel="icon" sizes="512x512" href="logo 2.png">

</head>

<body>
    <div class="floating-particles"></div>

    <div class="header">
        <h2>Welcome to SCSMS</h2>
    </div>

    <!-- DASHBOARD LAYOUT START -->
    <div class="dashboard-layout">

        <!-- LEFT PANEL : WEATHER & CITY INFO -->
        <aside class="left-panel">

            <section class="weather-card">
                <h3>ğŸŒ¤ï¸ Vellore Weather</h3>

                <div class="weather-main">
                    <h1 id="temp">--Â°C</h1>
                    <p id="weatherDesc">Loading...</p>
                </div>

                <div class="weather-stats">
                    <div>ğŸ’¨ Wind: <span id="wind">--</span></div>
                    <div>ğŸ’§ Humidity: <span id="humidity">--</span></div>
                    <div>â˜€ï¸ UV: <span id="uv">--</span></div>
                    <div>ğŸŒ« AQI: <span id="aqi">--</span></div>
                </div>

                <div class="sun-info">
                    ğŸŒ… <span id="sunrise">--</span> |
                    ğŸŒ‡ <span id="sunset">--</span>
                </div>
            </section>

        </aside>

        <!-- RIGHT PANEL : CITIZEN CONTENT -->
        <main class="right-panel">
            <!-- DASHBOARD LAYOUT START -->


            <div class="main-container">
                <div class="form-card">
                    <h2 class="form-title">Report Issue</h2>
                    <div class="input-group">
                        <label>ğŸ“¸ Attach Photo</label>
                        <input type="file" id="photo" accept="image/*" form="noform">
                    </div>

                    <div class="input-group">
                        <label>ğŸ“ Issue Title</label>
                        <input id="title" placeholder="e.g. Pothole on Main Road">
                    </div>

                    <div class="input-group">
                        <label>ğŸ“„ Description</label>
                        <textarea id="desc" placeholder="Describe the issue in detail..."></textarea>
                    </div>

                    <div class="location-section">
                        <h3>ğŸ“ Service Location</h3>

                        <div class="location-buttons">
                            <button class="live-btn" onclick="useLiveLocation()">
                                ğŸ“¡ Use My Live Location
                            </button>
                            <div class="or-divider">OR</div>
                            <input id="location" placeholder="Enter location manually">
                        </div>

                        <input type="hidden" id="lat">
                        <input type="hidden" id="lng">

                        <div id="map" class="interactive-map"></div>

                        <input type="hidden" id="lat">
                        <input type="hidden" id="lng">
                    </div>

                    <button type="button" class="submit-btn" onclick="submitComplaint()">
                        ğŸš€ Submit Complaint
                    </button>

                </div>
            </div>

            <!-- Profile Menu -->
            <div id="profileIcon" class="top-icon" onclick="toggleProfileMenu()">ğŸ™ğŸ»â€â™‚ï¸</div>
            <div id="profileMenu" class="profile-menu">
                <div onclick="openProfile()">Profile</div>
                <div onclick="goToStatus()">View My Complaints</div>
                <div onclick="logout()">Logout</div>
            </div>

            <!-- Notification Bell -->
            <div id="bell" class="top-icon" onclick="openNotifications()">ğŸ””</div>
            <div id="notificationPanel" class="notification-panel">
                <div class="panel-header">
                    <h3>ğŸ”” Notifications</h3>
                    <span class="close-btn" onclick="closeNotifications()">âŒ</span>
                </div>
                <div class="notification-list">
                    <ul id="notify"></ul>
                </div>
            </div>

            <!-- Chat Bot -->
            <div id="chat-btn" onclick="toggleChat()" class="chat-btn">ğŸ’¬</div>
            <div id="chat-window" class="chat-window">
                <div class="chat-header">
                    <span>City Support</span>
                    <span class="chat-close" onclick="toggleChat()">âœ–</span>
                </div>
                <div id="chat-messages" class="chat-messages"></div>
                <div class="chat-input-container">
                    <input id="chat-input" placeholder="Ask a query..." />
                    <button onclick="sendMessage()">Send</button>
                </div>
            </div>
    </div>

    <section class="stats-section">
        <div class="stat-card">
            <h4>ğŸ“ Total Reported</h4>
            <p id="totalCount">0</p>
        </div>

        <div class="stat-card resolved">
            <h4>âœ… Resolved</h4>
            <p id="resolvedCount">0</p>
        </div>

        <div class="stat-card pending">
            <h4>â³ Pending</h4>
            <p id="pendingCount">0</p>
        </div>

        <div class="stat-card impact">
            <h4>â­ Civic Points</h4>
            <p id="impactScore">0</p>
            <small id="badge">Observer</small>
        </div>
    </section>

    <section class="announcement-section">
        <h3>ğŸ“¢ City Announcements</h3>
        <ul id="announcements"></ul>
    </section>


    <section class="timeline-section">
        <h3>ğŸ•’ My Recent Activity</h3>
        <ul id="activityList"></ul>
    </section>

    <!-- Emergency Floating Button -->
    <div id="emergencyFab" class="emergency-fab" onclick="toggleEmergencyMenu()">ğŸ“</div>

    <!-- Emergency Quick Actions -->
    <div id="emergencyMenu" class="emergency-menu">
        <button onclick="callEmergency('100')">ğŸš“ Police</button>
        <button onclick="callEmergency('102')">ğŸš‘ Ambulance</button>
        <button onclick="callEmergency('101')">ğŸ”¥ Fire</button>
    </div>



    </main>
    </div>
    <!-- DASHBOARD LAYOUT END -->

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://scsms-backend.onrender.com/socket.io/socket.io.js"></script>
    <script src="js/citizen.js"></script>

</body>

</html>